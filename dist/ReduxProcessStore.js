"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.ReduxProcessStore = void 0;
const redux_thunk_1 = __importDefault(require("redux-thunk"));
const redux_1 = require("redux");
class ReduxProcessStore {
    constructor(middlewares = []) {
        this.processes = {};
        const middleware = redux_1.applyMiddleware(redux_thunk_1.default, ...middlewares);
        this._internalReducer = this._internalReducer.bind(this);
        this.store = redux_1.createStore(this._internalReducer, middleware);
    }
    addProcessGroup(processGroup) {
        this.processes[processGroup.groupName] = processGroup.getReducer();
        this._updateReducer();
        return this;
    }
    removeProcessGroup(processGroup) {
        delete this.processes[processGroup.groupName];
        this._updateReducer();
        return this;
    }
    _updateReducer() {
        const newReducer = redux_1.combineReducers(this.processes);
        this.store.replaceReducer(newReducer);
    }
    _internalReducer(state = {}) {
        return state;
    }
    getStore() {
        return this.store;
    }
}
exports.ReduxProcessStore = ReduxProcessStore;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVkdXhQcm9jZXNzU3RvcmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvUmVkdXhQcm9jZXNzU3RvcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsOERBQStCO0FBQy9CLGlDQUFxRjtBQUtyRixNQUFhLGlCQUFpQjtJQU81QixZQUFZLGNBQXFCLEVBQUU7UUFMekIsY0FBUyxHQUdmLEVBQUUsQ0FBQTtRQUdKLE1BQU0sVUFBVSxHQUFHLHVCQUFlLENBQUMscUJBQUssRUFBRSxHQUFHLFdBQVcsQ0FBQyxDQUFBO1FBQ3pELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQ3hELElBQUksQ0FBQyxLQUFLLEdBQUcsbUJBQVcsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsVUFBVSxDQUFDLENBQUE7SUFDN0QsQ0FBQztJQUVELGVBQWUsQ0FBQyxZQUEwQztRQUN4RCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUMsR0FBRyxZQUFZLENBQUMsVUFBVSxFQUFFLENBQUE7UUFDbEUsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1FBQ3JCLE9BQU8sSUFBSSxDQUFBO0lBQ2IsQ0FBQztJQUVELGtCQUFrQixDQUFDLFlBQTBDO1FBQzNELE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUE7UUFDN0MsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFBO1FBQ3JCLE9BQU8sSUFBSSxDQUFBO0lBQ2IsQ0FBQztJQUVELGNBQWM7UUFDWixNQUFNLFVBQVUsR0FBRyx1QkFBZSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQTtRQUNsRCxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsQ0FBQTtJQUN2QyxDQUFDO0lBRUQsZ0JBQWdCLENBQ2QsUUFBNkIsRUFBRTtRQUUvQixPQUFPLEtBQUssQ0FBQTtJQUNkLENBQUM7SUFFRCxRQUFRO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFBO0lBQ25CLENBQUM7Q0FDRjtBQXZDRCw4Q0F1Q0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdGh1bmsgZnJvbSAncmVkdXgtdGh1bmsnXG5pbXBvcnQgeyBTdG9yZSwgY3JlYXRlU3RvcmUsIGFwcGx5TWlkZGxld2FyZSwgY29tYmluZVJlZHVjZXJzLCBSZWR1Y2VyIH0gZnJvbSAncmVkdXgnXG5pbXBvcnQgeyBJUmVkdXhQcm9jZXNzU3RvcmUgfSBmcm9tICcuL2ludGVyZmFjZXMvSVJlZHV4UHJvY2Vzc1N0b3JlJ1xuaW1wb3J0IHsgSVJlZHV4UHJvY2Vzc0dyb3VwIH0gZnJvbSAnLi9pbnRlcmZhY2VzL0lSZWR1eFByb2Nlc3NHcm91cCdcbmltcG9ydCB7IFJlZHV4UHJvY2Vzc0FjdGlvbiB9IGZyb20gJy4vdHlwZXMvUmVkdXhQcm9jZXNzJ1xuXG5leHBvcnQgY2xhc3MgUmVkdXhQcm9jZXNzU3RvcmUgaW1wbGVtZW50cyBJUmVkdXhQcm9jZXNzU3RvcmUge1xuICBwcm90ZWN0ZWQgc3RvcmU6IFN0b3JlPGFueSwgUmVkdXhQcm9jZXNzQWN0aW9uPGFueT4+XG4gIHByb3RlY3RlZCBwcm9jZXNzZXM6IFJlY29yZDxcbiAgICBzdHJpbmcsXG4gICAgUmVkdWNlcjxhbnksIFJlZHV4UHJvY2Vzc0FjdGlvbjxhbnk+PlxuICA+ID0ge31cblxuICBjb25zdHJ1Y3RvcihtaWRkbGV3YXJlczogYW55W10gPSBbXSkge1xuICAgIGNvbnN0IG1pZGRsZXdhcmUgPSBhcHBseU1pZGRsZXdhcmUodGh1bmssIC4uLm1pZGRsZXdhcmVzKVxuICAgIHRoaXMuX2ludGVybmFsUmVkdWNlciA9IHRoaXMuX2ludGVybmFsUmVkdWNlci5iaW5kKHRoaXMpXG4gICAgdGhpcy5zdG9yZSA9IGNyZWF0ZVN0b3JlKHRoaXMuX2ludGVybmFsUmVkdWNlciwgbWlkZGxld2FyZSlcbiAgfVxuXG4gIGFkZFByb2Nlc3NHcm91cChwcm9jZXNzR3JvdXA6IElSZWR1eFByb2Nlc3NHcm91cDxhbnksIGFueT4pOiB0aGlzIHtcbiAgICB0aGlzLnByb2Nlc3Nlc1twcm9jZXNzR3JvdXAuZ3JvdXBOYW1lXSA9IHByb2Nlc3NHcm91cC5nZXRSZWR1Y2VyKClcbiAgICB0aGlzLl91cGRhdGVSZWR1Y2VyKClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgcmVtb3ZlUHJvY2Vzc0dyb3VwKHByb2Nlc3NHcm91cDogSVJlZHV4UHJvY2Vzc0dyb3VwPGFueSwgYW55Pik6IHRoaXMge1xuICAgIGRlbGV0ZSB0aGlzLnByb2Nlc3Nlc1twcm9jZXNzR3JvdXAuZ3JvdXBOYW1lXVxuICAgIHRoaXMuX3VwZGF0ZVJlZHVjZXIoKVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBfdXBkYXRlUmVkdWNlcigpIHtcbiAgICBjb25zdCBuZXdSZWR1Y2VyID0gY29tYmluZVJlZHVjZXJzKHRoaXMucHJvY2Vzc2VzKVxuICAgIHRoaXMuc3RvcmUucmVwbGFjZVJlZHVjZXIobmV3UmVkdWNlcilcbiAgfVxuXG4gIF9pbnRlcm5hbFJlZHVjZXIoXG4gICAgc3RhdGU6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuICApIHtcbiAgICByZXR1cm4gc3RhdGVcbiAgfVxuXG4gIGdldFN0b3JlKCkge1xuICAgIHJldHVybiB0aGlzLnN0b3JlXG4gIH1cbn1cbiJdfQ==